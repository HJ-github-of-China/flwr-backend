# ğŸ“š æ¨¡å‹ç®¡ç†æ¥å£æ–‡æ¡£

## åŸºç¡€ä¿¡æ¯

- **åŸºç¡€URL**: `/api`
- **è¯·æ±‚æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: JSON
- **è®¤è¯æ–¹å¼**: Bearer Token

## é€šç”¨å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 400,
  "message": "é”™è¯¯æè¿°",
  "data": null
}
```

## 1. åˆ›å»ºæ¨¡å‹æ¥å£

### æ¥å£è¯´æ˜
åˆ›å»ºæ–°çš„è”é‚¦å­¦ä¹ æ¨¡å‹é…ç½®

### è¯·æ±‚ä¿¡æ¯
- **URL**: `POST /api/models`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### è¯·æ±‚å‚æ•°
```json
{
  "model_name": "å®éªŒæ¨¡å‹A",
  "model_version": "1.0.0",
  "learning_rate": 0.001,
  "epochs": 100,
  "aggregation_strategy": "FedAvg",
  "batch_size": 32,
  "optimizer": "Adam",
  "algorithm": "ResNet50",
  "model_status": "training",
  "model_path": "/models/exp_a_v1.pth",
  "description": "åŸºäºResNet50çš„è”é‚¦å­¦ä¹ æ¨¡å‹"
}
```

**å‚æ•°è¯´æ˜**:
| å­—æ®µå               | ç±»å‹    | å¿…é¡» | è¯´æ˜                  | ç¤ºä¾‹                |
| -------------------- | ------- | ---- | --------------------- | ------------------- |
| model_name           | string  | æ˜¯   | æ¨¡å‹åç§°              | "å®éªŒæ¨¡å‹A"         |
| algorithm            | string  | æ˜¯   | ä½¿ç”¨çš„ç®—æ³•            | "ResNet50"          |
| model_version        | string  | å¦   | æ¨¡å‹ç‰ˆæœ¬ï¼Œé»˜è®¤"1.0.0" | "1.0.0"             |
| learning_rate        | number  | å¦   | å­¦ä¹ ç‡                | 0.001               |
| epochs               | integer | å¦   | è®­ç»ƒè½®æ¬¡              | 100                 |
| aggregation_strategy | string  | å¦   | èšåˆç­–ç•¥              | "FedAvg"            |
| batch_size           | integer | å¦   | æ‰¹æ¬¡å¤§å°              | 32                  |
| optimizer            | string  | å¦   | ä¼˜åŒ–å™¨                | "Adam"              |
| model_status         | string  | å¦   | æ¨¡å‹çŠ¶æ€              | "training"          |
| model_path           | string  | å¦   | æ¨¡å‹æ–‡ä»¶è·¯å¾„          | "/models/exp_a.pth" |
| description          | string  | å¦   | æ¨¡å‹æè¿°              | "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¨¡å‹"  |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "æ¨¡å‹åˆ›å»ºæˆåŠŸ",
  "data": {
    "model": {
      "model_id": 1,
      "model_name": "å®éªŒæ¨¡å‹A",
      "model_version": "1.0.0",
      "learning_rate": 0.001,
      "epochs": 100,
      "aggregation_strategy": "FedAvg",
      "batch_size": 32,
      "optimizer": "Adam",
      "algorithm": "ResNet50",
      "model_status": "training",
      "model_path": "/models/exp_a_v1.pth",
      "description": "åŸºäºResNet50çš„è”é‚¦å­¦ä¹ æ¨¡å‹",
      "created_time": "2024-01-15 10:00:00",
      "updated_time": "2024-01-15 10:00:00"
    },
    "message": "æ¨¡å‹åˆ›å»ºæˆåŠŸ"
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "code": 400,
  "message": "æ¨¡å‹åç§°å’Œç‰ˆæœ¬å·²å­˜åœ¨",
  "data": null
}
```

## 2. æŸ¥è¯¢æ¨¡å‹åˆ—è¡¨æ¥å£

### æ¥å£è¯´æ˜
è·å–æ¨¡å‹åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰å’Œæ’åº

### è¯·æ±‚ä¿¡æ¯
- **URL**: `GET /api/models`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### æŸ¥è¯¢å‚æ•°
| å‚æ•°å       | ç±»å‹    | å¿…é¡» | è¯´æ˜               | é»˜è®¤å€¼         | ç¤ºä¾‹         |
| ------------ | ------- | ---- | ------------------ | -------------- | ------------ |
| page         | integer | å¦   | é¡µç                | 1              | 1            |
| pageSize     | integer | å¦   | æ¯é¡µå¤§å°           | 10             | 20           |
| model_name   | string  | å¦   | æ¨¡å‹åç§°æœç´¢å…³é”®è¯ | ""             | "å®éªŒ"       |
| model_status | string  | å¦   | æ¨¡å‹çŠ¶æ€ç­›é€‰       | ""             | "training"   |
| sort_by      | string  | å¦   | æ’åºå­—æ®µ           | "created_time" | "model_name" |
| sort_order   | string  | å¦   | æ’åºæ–¹å‘           | "desc"         | "asc"        |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "model_id": 1,
        "model_name": "å®éªŒæ¨¡å‹A",
        "model_version": "1.0.0",
        "learning_rate": 0.001,
        "epochs": 100,
        "aggregation_strategy": "FedAvg",
        "batch_size": 32,
        "optimizer": "Adam",
        "algorithm": "ResNet50",
        "model_status": "training",
        "model_path": "/models/exp_a_v1.pth",
        "description": "åŸºäºResNet50çš„è”é‚¦å­¦ä¹ æ¨¡å‹",
        "created_time": "2024-01-15 10:00:00",
        "updated_time": "2024-01-15 10:00:00"
      },
      {
        "model_id": 2,
        "model_name": "å®éªŒæ¨¡å‹B",
        "model_version": "1.0.0",
        "learning_rate": 0.0005,
        "epochs": 80,
        "aggregation_strategy": "FedMA",
        "batch_size": 16,
        "optimizer": "SGD",
        "algorithm": "DenseNet121",
        "model_status": "completed",
        "model_path": "/models/exp_b_v1.pth",
        "description": "åŸºäºDenseNet121çš„è”é‚¦å­¦ä¹ æ¨¡å‹",
        "created_time": "2024-01-14 15:30:00",
        "updated_time": "2024-01-14 16:00:00"
      }
    ],
    "pagination": {
      "currentPage": 1,
      "pageSize": 10,
      "totalCount": 25,
      "totalPages": 3,
      "hasPrev": false,
      "hasNext": true
    }
    
  }
}
```

## 3. è·å–æ¨¡å‹è¯¦æƒ…æ¥å£

### æ¥å£è¯´æ˜
è·å–æŒ‡å®šæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯

### è¯·æ±‚ä¿¡æ¯
- **URL**: `GET /api/models/{model_id}`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### è·¯å¾„å‚æ•°
| å‚æ•°å   | ç±»å‹    | å¿…é¡» | è¯´æ˜   |
| -------- | ------- | ---- | ------ |
| model_id | integer | æ˜¯   | æ¨¡å‹ID |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "model": {
      "model_id": 1,
      "model_name": "å®éªŒæ¨¡å‹A",
      "model_version": "1.0.0",
      "learning_rate": 0.001,
      "epochs": 100,
      "aggregation_strategy": "FedAvg",
      "batch_size": 32,
      "optimizer": "Adam",
      "algorithm": "ResNet50",
      "model_status": "training",
      "model_path": "/models/exp_a_v1.pth",
      "description": "åŸºäºResNet50çš„è”é‚¦å­¦ä¹ æ¨¡å‹",
      "created_time": "2024-01-15 10:00:00",
      "updated_time": "2024-01-15 10:00:00"
    }
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "code": 404,
  "message": "æ¨¡å‹ä¸å­˜åœ¨",
  "data": null
}
```

## 4. æ›´æ–°æ¨¡å‹æ¥å£

### æ¥å£è¯´æ˜
æ›´æ–°æ¨¡å‹é…ç½®ä¿¡æ¯

### è¯·æ±‚ä¿¡æ¯
- **URL**: `PUT /api/models/{model_id}`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### è·¯å¾„å‚æ•°
| å‚æ•°å   | ç±»å‹    | å¿…é¡» | è¯´æ˜   |
| -------- | ------- | ---- | ------ |
| model_id | integer | æ˜¯   | æ¨¡å‹ID |

### è¯·æ±‚å‚æ•°
```json
{
  "model_name": "å®éªŒæ¨¡å‹A-æ›´æ–°",
  "learning_rate": 0.0008,
  "epochs": 120,
  "model_status": "completed",
  "description": "æ›´æ–°åçš„æ¨¡å‹æè¿°"
}
```

**å‚æ•°è¯´æ˜**:
| å­—æ®µå               | ç±»å‹    | å¿…é¡» | è¯´æ˜         |
| -------------------- | ------- | ---- | ------------ |
| model_name           | string  | å¦   | æ¨¡å‹åç§°     |
| model_version        | string  | å¦   | æ¨¡å‹ç‰ˆæœ¬     |
| learning_rate        | number  | å¦   | å­¦ä¹ ç‡       |
| epochs               | integer | å¦   | è®­ç»ƒè½®æ¬¡     |
| aggregation_strategy | string  | å¦   | èšåˆç­–ç•¥     |
| batch_size           | integer | å¦   | æ‰¹æ¬¡å¤§å°     |
| optimizer            | string  | å¦   | ä¼˜åŒ–å™¨       |
| algorithm            | string  | å¦   | ä½¿ç”¨çš„ç®—æ³•   |
| model_status         | string  | å¦   | æ¨¡å‹çŠ¶æ€     |
| model_path           | string  | å¦   | æ¨¡å‹æ–‡ä»¶è·¯å¾„ |
| description          | string  | å¦   | æ¨¡å‹æè¿°     |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "æ¨¡å‹æ›´æ–°æˆåŠŸ",
  "data": {
    "model": {
      "model_id": 1,
      "model_name": "å®éªŒæ¨¡å‹A-æ›´æ–°",
      "model_version": "1.0.0",
      "learning_rate": 0.0008,
      "epochs": 120,
      "aggregation_strategy": "FedAvg",
      "batch_size": 32,
      "optimizer": "Adam",
      "algorithm": "ResNet50",
      "model_status": "completed",
      "model_path": "/models/exp_a_v1.pth",
      "description": "æ›´æ–°åçš„æ¨¡å‹æè¿°",
      "created_time": "2024-01-15 10:00:00",
      "updated_time": "2024-01-15 11:30:00"
    },
    "message": "æ¨¡å‹æ›´æ–°æˆåŠŸ"
  }
}
```

## 5. åˆ é™¤æ¨¡å‹æ¥å£

### æ¥å£è¯´æ˜
è½¯åˆ é™¤æŒ‡å®šæ¨¡å‹

### è¯·æ±‚ä¿¡æ¯
- **URL**: `DELETE /api/models/{model_id}`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### è·¯å¾„å‚æ•°
| å‚æ•°å   | ç±»å‹    | å¿…é¡» | è¯´æ˜   |
| -------- | ------- | ---- | ------ |
| model_id | integer | æ˜¯   | æ¨¡å‹ID |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "æ¨¡å‹åˆ é™¤æˆåŠŸ",
  "data": null
}
```

**é”™è¯¯å“åº”**:
```json
{
  "code": 404,
  "message": "æ¨¡å‹ä¸å­˜åœ¨",
  "data": null
}
```

## 6. è·å–æ¨¡å‹é€‰é¡¹æ¥å£

### æ¥å£è¯´æ˜
è·å–æ¨¡å‹ç›¸å…³çš„é€‰é¡¹åˆ—è¡¨ï¼ˆç”¨äºå‰ç«¯ä¸‹æ‹‰é€‰æ‹©ï¼‰

### è¯·æ±‚ä¿¡æ¯
- **URL**: `GET /api/models/options`
- **Content-Type**: `application/json`
- **è®¤è¯**: éœ€è¦Bearer Token

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "model_status": [
      "training",
      "completed",
      "failed",
      "stopped"
    ],
    "aggregation_strategy": [
      "FedAvg",
      "FedMA",
      "FedProx",
      "FedNova",
      "SCAFFOLD"
    ],
    "optimizer": [
      "SGD",
      "Adam",
      "AdamW",
      "RMSprop",
      "Adagrad"
    ]
  }
}
```

## å­—æ®µæšä¸¾å€¼è¯´æ˜

### æ¨¡å‹çŠ¶æ€ (model_status)
| å€¼        | è¯´æ˜     |
| --------- | -------- |
| training  | è®­ç»ƒä¸­   |
| completed | å·²å®Œæˆ   |
| failed    | è®­ç»ƒå¤±è´¥ |
| stopped   | å·²åœæ­¢   |

### èšåˆç­–ç•¥ (aggregation_strategy)
| å€¼       | è¯´æ˜             |
| -------- | ---------------- |
| FedAvg   | è”é‚¦å¹³å‡         |
| FedMA    | è”é‚¦æ¨¡å‹å¹³å‡     |
| FedProx  | è”é‚¦è¿‘ç«¯ä¼˜åŒ–     |
| FedNova  | è”é‚¦å½’ä¸€åŒ–å¹³å‡   |
| SCAFFOLD | æ§åˆ¶å˜é‡è”é‚¦å­¦ä¹  |

### ä¼˜åŒ–å™¨ (optimizer)
| å€¼      | è¯´æ˜                   |
| ------- | ---------------------- |
| SGD     | éšæœºæ¢¯åº¦ä¸‹é™           |
| Adam    | è‡ªé€‚åº”çŸ©ä¼°è®¡           |
| AdamW   | Adam with Weight Decay |
| RMSprop | å‡æ–¹æ ¹ä¼ æ’­             |
| Adagrad | è‡ªé€‚åº”æ¢¯åº¦ç®—æ³•         |

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜           | å¯èƒ½åŸå›                    |
| ------ | -------------- | -------------------------- |
| 200    | æˆåŠŸ           | è¯·æ±‚å¤„ç†æˆåŠŸ               |
| 400    | è¯·æ±‚å‚æ•°é”™è¯¯   | ç¼ºå°‘å¿…å¡«å­—æ®µã€å‚æ•°æ ¼å¼é”™è¯¯ |
| 401    | æœªæˆæƒ         | Tokenæ— æ•ˆæˆ–è¿‡æœŸ            |
| 404    | èµ„æºä¸å­˜åœ¨     | æ¨¡å‹IDä¸å­˜åœ¨               |
| 500    | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ç­‰           |

## å‰ç«¯è°ƒç”¨ç¤ºä¾‹

### åˆ›å»ºæ¨¡å‹
```javascript
const createModel = async (modelData) => {
    const response = await fetch('/api/models', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify(modelData)
    });
    return await response.json();
};

// ä½¿ç”¨ç¤ºä¾‹
const result = await createModel({
    model_name: 'å®éªŒæ¨¡å‹D',
    model_version: '1.0.0',
    learning_rate: 0.001,
    epochs: 100,
    aggregation_strategy: 'FedAvg',
    batch_size: 32,
    optimizer: 'Adam',
    algorithm: 'ResNet50',
    description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¨¡å‹'
});
```

### æŸ¥è¯¢æ¨¡å‹åˆ—è¡¨
```javascript
const getModels = async (filters = {}) => {
    const params = new URLSearchParams(filters);
    const response = await fetch(`/api/models?${params}`, {
        headers: {
            'Authorization': 'Bearer ' + token
        }
    });
    return await response.json();
};

// ä½¿ç”¨ç¤ºä¾‹
const result = await getModels({
    model_name: 'å®éªŒ',
    model_status: 'training',
    page: 1,
    pageSize: 10,
    sort_by: 'created_time',
    sort_order: 'desc'
});
```

### æ›´æ–°æ¨¡å‹
```javascript
const updateModel = async (modelId, updateData) => {
    const response = await fetch(`/api/models/${modelId}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify(updateData)
    });
    return await response.json();
};

// ä½¿ç”¨ç¤ºä¾‹
await updateModel(1, {
    model_name: 'å®éªŒæ¨¡å‹A-æ›´æ–°',
    epochs: 120,
    model_status: 'completed'
});
```

# åº“è¡¨è®¾è®¡

**ä¸éœ€è¦å‡†ç¡®ç‡è¿™ä¸ªå­—æ®µï¼Œè¿™ä¸ªä¸æ˜¯æˆ‘èƒ½æ‰‹åŠ¨è®¾ç½®æ»´**

```sql
CREATE TABLE model(
    model_id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'æ¨¡å‹ID',
    model_name VARCHAR(100) NOT NULL COMMENT 'æ¨¡å‹åç§°',
    model_version VARCHAR(50) DEFAULT '1.0.0' COMMENT 'æ¨¡å‹ç‰ˆæœ¬',
    learning_rate DECIMAL(10,6) COMMENT 'å­¦ä¹ ç‡',
    epochs INT COMMENT 'è®­ç»ƒè½®æ¬¡',
    aggregation_strategy VARCHAR(50) COMMENT 'èšåˆç­–ç•¥',
    batch_size INT COMMENT 'æ‰¹æ¬¡å¤§å°',
    optimizer VARCHAR(50) COMMENT 'ä¼˜åŒ–å™¨',
    algorithm VARCHAR(100) COMMENT 'ç®—æ³•/ç¨‹åº',
    model_status VARCHAR(20) DEFAULT 'training' COMMENT 'æ¨¡å‹çŠ¶æ€: training, completed, failed, stopped',
    model_path VARCHAR(500) COMMENT 'æ¨¡å‹æ–‡ä»¶å­˜å‚¨è·¯å¾„',
    description TEXT COMMENT 'æ¨¡å‹æè¿°',
    created_time DATETIME NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    is_deleted TINYINT DEFAULT 0 COMMENT 'è½¯åˆ é™¤æ ‡è®°(0-æ­£å¸¸,1-åˆ é™¤)',
    UNIQUE KEY uk_model_name_version (model_name, model_version)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ¨¡å‹ä»“åº“è¡¨';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_model_status ON model(model_status);
CREATE INDEX idx_created_time ON model(created_time);
CREATE INDEX idx_model_name ON model(model_name);
```

## æ’å…¥æµ‹è¯•æ•°æ®

```sql
-- æ’å…¥ç¤ºä¾‹æ•°æ®ï¼ˆå¯¹åº”å›¾ç‰‡ä¸­çš„æ¨¡å‹ï¼‰
INSERT INTO model (
    model_name, learning_rate, epochs, aggregation_strategy, 
    batch_size, optimizer, algorithm, model_status, created_time
) VALUES 
('å®éªŒæ¨¡å‹A', 0.0005, 80, 'FedMA', 16, 'SGD', 'DenseNet121', 'training', '2024-06-15 10:00:00'),
('å®éªŒæ¨¡å‹B', 0.001, 100, 'FedAvg', 32, 'Adam', 'ResNet50', 'completed', '2024-06-14 15:30:00'),
('å®éªŒæ¨¡å‹C', 0.0001, 50, 'FedProx', 64, 'SGD', 'VGG16', 'training', '2024-06-13 09:20:00');
```

# 

